<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>Neutron Activation Calculator</title>
    <link rel="shortcut icon" href="favicon.ico">

    <style type="text/css">
        p { margin-bottom: 0; }
        /* body { font-size: 0.9em; } */
        .disabled { opacity: 0.3; }
        label { font-weight: inherit; }
        .hidden { overflow: hidden; }
        .colborder { margin-bottom: -100%; padding-bottom: 100%; }
        caption, td, th { padding: 0 0.5em 0 0.5em; }
        .controls input { width: 100%; }
        table { margin: 0; padding: 0; border-spacing: 0; border-color: lightgray; }
        th { vertical-align: baseline; }
        tbody tr:nth-child(2n) th, tbody tr.even th,
        tbody tr:nth-child(2n) td, tbody tr.even td,
        ul li:nth-child(2n), ol li:nth-child(2n) { background: inherit; /* background: none repeat scroll 0 0 #F3F3F9; */ }
        .error { color: red; }
        #activation-frame { float:left; width:30em; }
        #help-panel { margin-left:30em; overflow:scroll; }
        div.clear { clear:both; }
        div.control-group { margin-left: 0.5em; vertical-align: bottom; }
        /* div.control-group { height: 3ex; width: 15em; } */
        p.disclaimer { color: darkred; font-size:1.2em; }
        .help { display:none; }
        .help dl { margin-left: 30em; }
        .help dd { margin-left: 1em; }
        .help dt { margin-left: 0em; padding: 0.3em; font-weight: bold; }
        .help ol { margin-left: 29em; }
        .help li { margin-left: 0em; }
        .help div.bold { font-weight: bold; display: inline; }
        .help p { margin-left: 30em; }
        .help div.entrytext { 
           display:inline;
           font-weight:bold;
           font-style:oblique;
        }
        .help div.example:before { content:"Example: "; }

        .panel { position: relative; }
        .panel .btn { position:absolute; right: 6em; top: 0em;}
        /* .panel .btn { position:absolute; top:1em; right:1em; } */

        /* Keep constant baseline spacing even with superscript/subscript */
        sup, sub {
	  height: 0;
	  line-height: 1;
	  vertical-align: baseline;
	  _vertical-align: bottom;
	  position: relative;
        }
        sup { bottom: 1ex; }
        sub { top: .5ex; }
    </style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">
// IE doesn't seem to support keys
if(!Object.keys) Object.keys = function(o){  
 if (o !== Object(o))  throw new TypeError('Object.keys called on non-object');  
 var ret=[],p;  
 for(p in o) if(Object.prototype.hasOwnProperty.call(o,p)) ret.push(p);  
 return ret;  
}
        // Parse environment variables "activation.html?cutoff=...&abundance=..."
        function getURLParameter(name) {
            return decodeURIComponent(
                (RegExp(name + '=' + '(.+?)(&|$)').exec(location.search)||[,null])[1]
             );
        }
        function format_value(v) {
            return (v<CUTOFF ? '---' : ''+v.toPrecision(4));
        }
        function nice_number(v) {
            if (Math.abs(Math.round(v)-v) < 0.001) return Math.round(v);
            else return v.toFixed(1);
        }
        function format_time(v) {
            if (v >= 365.2425*24) return nice_number(v/365.2425/24)+' yrs';
            else if (v >= 48 || v == 24) return nice_number(v/24)+' days';
            else if (v >= 2 || v == 1) return nice_number(v)+' hrs';
            else if (v >= 2/60. | v == 1/60.) return nice_number(v*60)+' min';
            else return (v*3600).toPrecision(3)+' sec';
        }
        $(document).ready(function() {
            CUTOFF = getURLParameter('cutoff');
            if (CUTOFF==='null') CUTOFF = 0.0001;
            DECAY_LEVEL = getURLParameter('decay');
            if (DECAY_LEVEL ==='null') DECAY_LEVEL = CUTOFF>0?CUTOFF:0.0001;
            ABUNDANCE = getURLParameter('abundance');
            if (ABUNDANCE==='null') ABUNDANCE = "IAEA";

            // Enable forms; they are disabled by default so that noscript users
            // can't do anything.
            $('.container').removeClass("disabled");
            $('#id_chemical_formula').removeAttr("disabled");
            $('#id_submit_scat').removeAttr("disabled");
            $('#id_submit_act').removeAttr("disabled");

            //$("#id-activationForm").submit(submit_query);
            $("#id-activationForm").submit(function(event) {event.preventDefault();});
            $('#id_submit_scat').click(function() { submit_query('scattering'); });
            $('#id_submit_act').click(function() { submit_query('activation'); });
        });

    function submit_query(target){
        $.ajax({
            type:"POST",
            url:"/cgi-bin/nact.py",
            data: {
                calculate: target,
                sample: $('input:text[id=id_chemical_formula]').val(),
                flux: $('input:text[id=id_flux]').val(),
                fast: $('input:text[id=id_fast_ratio]').val(),
                Cd: $('input:text[id=id_Cd_ratio]').val(),
                mass: $('input:text[id=id_mass]').val(),
                density: $('input:text[id=id_density]').val(),
                thickness: $('input:text[id=id_thickness]').val(),
                wavelength: $('input:text[id=id_wavelength]').val(),
                exposure: $('input:text[id=id_time_on]').val(),
                rest: [0,1,24,360,$('input:text[id=id_time_off]').val()],
                decay: DECAY_LEVEL,
                //abundance: $('input:text[id=id_abundance]').val()
                abundance: ABUNDANCE
            },
            complete: function (xhr, status) { 
                //console.log(status);
                if (status==="parsererror") {
                    process_response({'success':false,'detail':{'JSON response':'parse error in return value---maybe NaN or Inf?'}});
                }  else if (status!=="success") {
                    process_response({'success':false,'detail':{'status error':status}});
                }
            },
            //error: function (xhr, status, err) { console.log("error",error); },
            success: process_response
        });
    }
    function process_response(ldata) {
        //console.log(ldata);
        if (typeof(ldata)==="string") ldata=$.parseJSON(ldata);
        if (!ldata.success) {
            var keys = Object.keys(ldata.detail);
            keys.sort();
            var content = '<div class="result error"><hr />\n';
            for (i = keys.length-1; i >= 0; i--) {
                content += '<pre class="error">Error ' +keys[i]+': '+ldata.detail[keys[i]]+'</pre>\n';
            }
            content += '</div>\n';
            $(content).prependTo('div[id=results]');
            return;
        }

        var act = ldata.activation;
        var sample = ldata.sample;
        var scat = ldata.scattering;
        var xscat = ldata.xray_scattering;
        var content = '<div class="result"><hr>\n';



        if (typeof act == 'undefined') {
            // do nothing if not returned
        } else if ("error" in act) {
            // Restricted title
            content += '<p>activation calculation failed with</p><pre>\n'+act.error+'</pre>\n';
        } else {
            // Full title
            content += '<h3>' + sample.mass + 'g of ' + sample.formula 
                            + ' for ' + format_time(act.exposure)+' at '+act.flux.toPrecision(3)+' n/cm<sup>2</sup>/s</h3>\n';
            var data={}
            //construct headers
            data.headers=["element","reaction","product","half life","0 hrs","1 hr", "24 hrs", "15 days", format_time(act.rest[4])]
            data.rows=[]
            for (var i=0; i < act.activity.length; i++){
                var active = false, row=act.activity[i];
                var columns = [row.isotope, row.reaction, row.product, row.halflife];
                for (var j=0; j < row.levels.length; j++){
                    active = active || (row.levels[j] >= CUTOFF);
                    columns.push(row.levels[j])
                }
                if (active) data.rows.push(columns);
            }
            var show_total = false;
            for (var j=0; j < act.total.length; j++) show_total = show_total || (act.total[j] >= CUTOFF);

            // Disclaimer
            content += '<p class="disclaimer">Estimated activation only. All samples must be evaluated by NIST Health Physics to determine if and how the sample can be removed from the NCNR.</p>';


            // Decay time
            if (act.decay_time > 0) {

                content += '<p>Time to decay below '+(1000*act.decay_level).toPrecision(3)+' nCi is '+format_time(act.decay_time)+'.</p>\n';
            }

            // Activation table
            if (data.rows.length > 0 || show_total) {
                //add headers to table
                content += '<table border=1>\n';
                content += ' <tr class="header"><th colspan="4" /><th colspan="5">Activity'+(CUTOFF>0?' above '+CUTOFF:'')+' (&mu;Ci)</th></tr>\n';
                content += ' <tr class="header">';
                for (var i in data.headers) {
                    content += '<th>' + data.headers[i] + '</th>';
                }
                content += '</tr>\n'
                for (var i in data.rows) {
                    content += ' <tr id="' + i + '">';
                    for (var j=0; j <data.rows[i].length; j++){
                        if (j>=4) {
                            content += '<td>'+format_value(data.rows[i][j])+'</td>';
                        } else {
                            content += '<td>' + data.rows[i][j] + '</td>';
                        }
                    }
                    content += '</tr>\n';
                }
                content += ' <tr class="header"><th colspan="4">total activity</th>';
                for (var j=0; j < act.total.length; j++) {
                    content += '<td>'+format_value(act.total[j])+'</td>';
                }
                content += ' </tr>\n';
                content += '</table>\n';
            } else {
                content += '<p>No activation above '+CUTOFF+' &mu;Ci</p>';
            }
        }


        if (typeof scat == 'undefined') {
            // do nothing if not returned
        } else if ("error" in scat) {
            content += '<p>neutron scattering calculation failed with</p><pre>\n'+scat.error+'</pre>\n';
        } else if ("error" in xscat) {
            content += '<p>X-ray scattering calculation failed with</p><pre>\n'+xscat.error+'</pre>\n';
        } else {
            // Drop coherent cross section from penetration depth calculation.
            // An alternative formulation, based on total scattering b, would be
            // penetration = 1/(1/scat.penetration - scat.xs.coh), which perhaps
            // takes diffuse coherent scattering into account [Glinka 2011].
            var penetration = 1 /(scat.xs.abs+scat.xs.incoh);
            var transmission = 100*Math.exp(-sample.thickness/penetration);

            // Mass density 
            var density_str = $('input:text[id=id_density]').val();
            content += "<h3>" + sample.formula + " at " + sample.density.toFixed(2) + " g/cm<sup>3</sup>";
            if (density_str.indexOf(':') !== -1) content += " from lattice "+density_str;
            content += "</h3>";

            // Source neutrons
            content += "<p>Source neutrons: "
                + scat.neutron.wavelength.toFixed(3) + " &Aring;"
                + " = "+scat.neutron.energy.toFixed(1) + " meV"
                + " = "+scat.neutron.velocity.toFixed(0) + " m/s<br>";
            content += "Source X-rays: "
                + xscat.xray.wavelength.toFixed(3) + " &Aring;"
                + " = " + xscat.xray.energy.toFixed(1) + " keV<br>";
            content += "</p>";

            // Neutron scattering
            content += '<table border=1>\n <tr>';
            content += '<th colspan="2">1/e penetration depth<br />(cm)</th>';
            content += '<th colspan="2">Scattering length density<br />(10<sup>-6</sup>/&Aring;<sup>2</sup>)</th>';
            content += '<th colspan="2">Scattering cross section<br />(1/cm)</th>';
            content += '<th colspan="2">X-ray SLD<br />(10<sup>-6</sup>/&Aring;<sup>2</sup>)</th>';
            content += '</tr>\n <tr>';
            content += '<th>abs</th><td>'+(1/scat.xs.abs).toFixed(3)+'</td>';
            content += "<th>real</th><td>"+scat.sld.real.toFixed(3)+'</td>';
            content += '<th>coh</th><td>'+scat.xs.coh.toFixed(3)+'</td>';
            content += "<th>real</th><td>"+xscat.sld.real.toFixed(3)+'</td>';
            content += '</tr>\n <tr>';
            content += '<th>abs+incoh</th><td>'+(1/(scat.xs.incoh+scat.xs.abs)).toFixed(3)+'</td>';
            content += "<th>imag</th><td>"+(-(scat.sld.imag).toFixed(3))+'</td>';
            content += '<th>abs</th><td>'+scat.xs.abs.toFixed(3)+'</td>';
            content += "<th>imag</th><td>"+(-(xscat.sld.imag).toFixed(3))+'</td>';
            content += '</tr>\n <tr>';
            content += '<th>abs+incoh+coh</th><td>'+scat.penetration.toFixed(3)+'</td>';
            content += '<th>incoh</th><td>'+scat.sld.incoh.toFixed(3)+'</td>';
            content += '<th>incoh</th><td>'+scat.xs.incoh.toFixed(3)+'</td>';
            content += '<th></th><td>'+''+'</td>';
            content += '</tr>\n <tr>';
            content += '</tr>\n</table>';

            // Neutron transmission
            content += '<p>Neutron transmission is '+transmission.toFixed(2)+'% for '+sample.thickness+' cm of sample (after absorption and incoherent scattering).</p>\n';
        }


        // End of div
        content += '</div>\n';

        $(content).prependTo('div[id=results]'); //add to the dom
    }
    </script>

    <!--<script type="text/javascript" src="/static/lib/activation.js"></script>-->


</head>
<body>

<?php
  include("/var/www/include/navigation.inc");
  include("/var/www/include/utility.inc");
?>

<noscript>
<h3>Enable javascript to run the activation calculator.</h3><hr />
</noscript>

<div class="container disabled">


    <p>Neutron activation and scattering calculator.</p>
   
    <div id="activation-frame">

        <form id="id-activationForm" class="blueForms" method="post">
            
            <div class="panel" id="material-panel">
            <h3>Material</h3>
            <table><tbody><tr>
              <td>
               <label for="id_chemical_formula" class="control-label requiredField">Chemical formula</label>
              </td>
            </tr><tr>
              <td>
               <div class="controls"><input id="id_chemical_formula" type="text" class="textinput textInput" name="chemical_formula" value="Co" title="chemical formula for the material or mixture" size="76"></div>
              </td>
            </tr></tbody></table>
            </div>
            
            <div class="panel" id="activation-panel">
            <h3>Neutron Activation</h3>
            <table><tbody><tr>
              <td rowspan="2">
               <label for="id_flux" class="control-label requiredField">
                 Thermal flux<br>(n/cm<sup>2</sup>/s)
               </label>
              </td>
              <td colspan="2" align="center">For rabbit system</td>
            </tr>

            <tr>
              <td>
               <label for="id_Cd_ratio" class="control-label">Cd ratio</label>
              </td>
              <td>
               <label for="id_fast_ratio" class="control-label">Thermal/fast ratio</label>
              </td>
            </tr>


            <tr>
              <td>
               <div class="controls"><input id="id_flux" type="text" class="textinput textInput" name="flux" value="1e8" title="Thermal beam flux at sample"> </div>
              </td>
              <td>
               <div class="controls"><input id="id_Cd_ratio" type="text" class="textinput textInput" name="Cd_ratio" value="0" title="Cd ratio, or 0 if no epithermal neutrons."> </div>
              </td>
              <td>
               <div class="controls"><input id="id_fast_ratio" type="text" class="textinput textInput" name="fast_ratio" value="0" title="Thermal/fast neutron ratio, or 0 if no fast neutrons."> </div>
              </td>
            </tr>

            <tr>
              <td>
               <label for="id_mass" class="control-label">Mass<br>(g, kg, mg or ug)</label>
              </td><td>
               <label for="id_time_on" class="control-label">Time on beam<br>(h m s d w y)</label>
              </td><td>
               <label for="id_time_off" class="control-label">Time off beam<br>(h m s d w y)</label>
              </td>
            </tr>

            <tr>

              <td>
               <div class="controls"><input id="id_mass" type="text" class="textinput textInput" name="mass" value="1" title="Sample mass.  Activation scales linearly with mass."></div>
              </td><td>
               <div class="controls"><input id="id_time_on" type="text" class="textinput textInput" name="time_on" value="10" title="Sample exposure time in hours, minutes, seconds, days, weeks or years."> </div>
              </td><td>
               <div class="controls"><input id="id_time_off" type="text" class="textinput textInput" name="time_off" value="1 y" title="Time since sample was removed from the beam.  0, 1 hour, 1 day and 15 days are automatically calculated"> </div>
              </td>
            </tr></tbody></table>
            <input type="submit" name="submit_act" value="Calculate" class="btn btn-primary" id="id_submit_act"> 
            </div>
            
            <div class="panel" id="scattering-panel">
            <h3>Absorption and Scattering</h3>
            <table><tbody><tr>
              <td>
               <label for="id_density" class="control-label">Density<br> (g/cm<sup>3</sup> or lattice)</label>
              </td><td>
               <label for="id_thickness" class="control-label">Thickness<br> (cm)</label>
              </td>
            </tr><tr>
              <td>
               <div class="controls"><input id="id_density" type="text" class="textinput textInput" name="density" value="" title="Sample density float or a:val b:val c:val (Å) alpha:val beta:val gamma:val (°)."></div>
              </td><td>
               <div class="controls"><input id="id_thickness" type="text" class="textinput textInput" name="thickness" value="1" title="Sample thickness for computing total scattering."></div>
              </td>
            </tr><tr>
              <td>
               <label for="id_wavelength" class="control-label">Source neutrons<br>(Ang, meV or m/s)</label>
              </td><td>
               <label for="id_xray" class="control-label">Source X-rays<br>(Ang, keV or Ka)</label>
              </td>
            </tr><tr>
              <td>
               <div class="controls"><input id="id_wavelength" type="text" class="textinput textInput" name="wavelength" value="1 Ang" title="Neutron source."></div>
              </td><td>
               <div class="controls"><input id="id_xray" type="text" class="textinput textInput" name="xray" value="Cu Ka" title="X-ray source."></div>
              </td>
            </tr></tbody></table>
            <input type="submit" name="submit_scat" value="Calculate" class="btn btn-primary" id="id_submit_scat"> 
            </div>
<!--
            <div id="div_id_abundance" class="control-group">
               <label for="id_abundance" class="control-label requiredField">Abundance (IAEA or NIST)</label>
               <div class="controls"><input id="id_abundance" type="text" class="textinput textInput" name="abundance" value="NIST" 
                    title="Isotopic abundance for activation calculation uses either IAEA Report 273: Handbook of Nuclear Activation Data, 1987, or NIST Isotopic Composition of the Elements, 2001; sld and absorption calculations use NIST abundance."
               /> </div>
            </div>
-->
        </form>

    </div>
    <div id="help_panel">
<!-- help for individual fields -->
<div id="help_chemical_formula" class="help">
<h3>Chemical formula</h3>
<p>The chemical formula parser allows you to specify materials and mixtures.  
Formulas are parsed with 
<a href="http://reflectometry.org/danse/docs/elements/guide/formula_grammar.html">periodictable</a> 
python package.
</p>

<dl>
<dt>simple formula</dt>
<dd>A basic formula consists of elements and their quantities.
<div class="example"><div class="entrytext">CaCO3</div> represents the chemical CaCO<sub>3</sub></div>
</dd>

<dt>multi-part formula</dt>
<dd>Formulas can be built from parts by separating them with "+" or space, with a number before the part representing repeats.  Using parentheses, a formula is treated as if it were a single unit.
<div class="example"><div class="entrytext">CaCO3+6H20</div>, 
<div class="entrytext">CaCO3 6H2O</div> and 
<div class="entrytext">CaCO3(H2O)6</div> all represent ikaite,
CaCO<sub>3</sub>&middot;6H<sub>2</sub>O</div>
</dd>

<dt>isotopes</dt>
<dd>Isotopes are represented by element[nuclide index].
Special symbols <div class="entrytext">D</div> and 
<div class="entrytext">T</div> 
can be used for <sup>2</sup>H and <sup>3</sup>H.
Isotopes can be mixed within a formula, such as 
<div class="entrytext">DHO</div> for partially deuterated water.  
<div class="example"><div class="entrytext">O[18]</div> represents the <sup>18</sup>O</div>
</dd>

<dt>density</dt>
<dd>Mass density is needed to compute scattering factors for the material.  
The density can be entered in the density field, or it can be given in 
the formula by adding @value to the end.  Densities for the pure elements are
already known.
<div class="example"><div class="entrytext">H2O@1</div> 
indicates that water has a density of 1 g/cm<sup>3</sup></div>
</dd>

<dt>isotopic density</dt>
<dd>If the formula uses a mixture of isotopes, you can still use the density 
of the material assuming natural abundance, and the calculator will scale 
it to the isotope specific density.  However, if you already know the isotopic
density, you can add an "i" to the value and it will not be scaled.
<div class="example"><div class="entrytext">D2O@1</div> and 
<div class="entrytext">D2O@1.11i</div> both give the density of D<sub>2</sub>O as 1.11 g/cm<sup>3</sup></div>
</dd>

<dt>mole fractions</dt>
<dd>Using non-integer quantities, arbitrary concentration ratios can be
be constructed.
<div class="example"><div class="entrytext">78.2H2O[16] + 21.8H2O[18] @1</div> represents water with 78.2% <sup>16</sup>O and 21.8% <sup>18</sup>O</div>
</dd>

<dt>mass fractions</dt>
<dd>Formulas can be mixed by mass, with each part starting with a percentage followed by formula followed by "//".  The first part must use "%wt" to indicate that it is a mass fraction.  The final part is the base, and it does not need a percentage since it makes up the rest of the material.
<div class="example"><div class="entrytext">50%wt Co // Ti</div> 
is more descriptive than Co<sub>0.552</sub>Ti<sub>0.448</sub></div>
<div class="example"><div class="entrytext">33%wt Co // 33% Fe // Ti</div> 
builds a 1:1:1 mixture by mass of cobalt-iron-titanium</div>
</dd>

<dt>volume fractions</dt>
<dd>Volume fractions are like mass fractions, but they use "%vol" instead.  
Each component of the volume fraction must specify the density.
<div class="example"><div class="entrytext">20%vol (10%wt NaCl@2.16 // H2O@1) // D2O@1</div>
is a 10% saline solution by weight mixed 20:80 by volume with 
D<sub>2</sub>O, which is the same as
<div class="entrytext">NaCl(H2O)29.1966(D2O)122.794@1.10i</div></div>
</dd>
</dl>
</div>

<div id="help_mass" class="help">
<h3>Material mass</h3>
<p>
The total neutron activation depends on the mass of the individual
isotopes in the sample and the total time in the beam.  All activation
calculations assume a thin plate sample, with all parts of the sample 
exposed to full flux during activation, and no self-shielding when 
estimating the activation level outside the beam.
</p>
<p>Neutron activation is a function of isotope, not element.  When
an element is used in a formula, the natural abundance of the individual
isotopes is used to determine the total activation.  By default, the 
activation calculator uses values from the IAEA handbook<sup>1</sup>, and the
scattering calculator uses the NIST atomic weights and isotope composition
	database.<sup>2</sup>
</p>

<p>Parameters are controlled by URL:
<dl>
<dt>isotope abundance</dt>
<dd>
The NIST database can be selected for isotope abundance using:
<a href="activation.html?abundance=NIST">activation.html?abundance=NIST</a>
</dd>

<dt>activation cutoff</dt>
<dd>
The cutoff values for displaying activation data are set to 0.0001 uCu by default.  The full activation levels
can be displayed using: <a href="activation.html?cutoff=0">activation.html?cutoff=0</a>
</dd>

<dt>decay cutoff</dt>
<dd>The activation calculator determines the amount of time for the activation to decay to
the cutoff level, or to 0.0001 uCu if cutoff is 0.  This can be set to a value
such as 0.1 uCu using: <a href="activation.html?decay=0.1">activation.html?decay=0.1</a>
</dd>
</dl>
</p>

<ol>
<li><em>IAEA 273: Handbook on Nuclear Activation Data, 1987</em></li>
<li><em>Bölke, et al. Isotopic Compositions of the Elements, 2001. J. Phys. Chem. Ref. Data, Vol. 34, No. 1, 2005</em></li>
</ol>
</div>

<div id="help_density" class="help">

<h3>Mass density</h3>
<p>
Density is required for computing absorption, transmission and scattering. It
can be given in one of several ways:
<dl>
<dt>directly</dt>
<dd>Enter a number, which will be interpreted as g/cm<sup>3</sup>, or 
equivalently, kg/L.  No units are needed.  If the value ends with an 'i', 
then the density used will be the isotopic density, otherwise the natural
density will be used, and the material density will be computed by
substituting the isotope ratios given in the formula.  
<div class="example">D<sub>2</sub>O has a natural density of
<div class="entrytext">1</div> and an isotopic density of 
<div class="entrytext">1.11i</div></div>
</dd>
<dt>cell volume</dt>
<dd>Enter a number in &Aring;<sup>3</sup> followed by A3.  Be sure that your
formula contains the correct number of atoms for the unit cell, possibly by
using n(formula), where n is 6 for hexagonal close packed, 4 for face centered
cells, 2 for body centered and base centered cells, or 1 for simple cells. 
<div class="example">4NaCl has a cell volume of
<div class="entrytext">179.4 A3</div></div>
</dd>
<dt>crystal lattice</dt>
<dd>Enter lattice parameters "a:n b:n c:n alpha:n beta:n gamma:n"
where a, b, c are in &Aring; and &alpha;, &beta;, &gamma; are in degrees.
If not specified, b and c default to a.  Ratios can also be used,
so that "b/a:n" gives b=n*a, and "c/a:n" gives c=n*a.  Angles
&alpha;, &beta;, and &gamma; default to 90&deg;.  Be sure that the
formula contains the correct number of atoms for the unit cell.
<div class="example">4NaCl has a lattice of
<div class="entrytext">a:5.6402</div></div>
</dd>
<dt>formula</dt>
<dd>Add <div class="entrytext">@</div> plus the density to the end of 
the formula, where density is in 
g/cm<sup>3</sup>.  For isotopic density, use 
<div class="entrytext">@</div> plus density plus 
<div class="entrytext">i</div>.  
<div class="example"><div class="entrytext">D2O@1</div> or 
<div class="entrytext">D2O@1.11i</div></div>
</dd>
</dl>
</div>

<div id="help_thickness" class="help">
<h3>Thickness</h3>
The material thickness in cm is used to determine sample transmission,
or how much beam will be absorbed by the sample or scattered incoherently.  
Leave it at 1 cm if you do not need this information.
</div>

<div id="help_flux" class="help">
<h3>Thermal flux</h3>
<p>
Provide the thermal flux equivalent for the pre-sample beam configuration 
for the instrument.  This is only need for computing the neutron activation
from the experiment, and is not used for computing scattering cross
sections.
</p><p>
Within the NCNR, you can access a list of
<a href="http://www-i.ncnr.nist.gov/beamline_operations/instrument_fluxes.html">instrument fluxes</a>,
but this is not available from outside.
</p>
</div>

<div id=help_Cd_ratio class="help">
<h3>Cadmium ratio</h3>
Samples in the rabbit tubes can be shielded with cadmium to reduce the thermal
flux while leaving the epithermal flux mostly unchanged.  The cadmium ratio
determines the degree of reduction in the scattering cross sections, corresponding
to the reduced flux.  This value is unitless.  Use a value of 0 for beamline
experiments.
</div>

<div id=help_fast_ratio class="help">
<h3>Thermal/fast ratio</h3>
When performing neutron activation analysis in a rabbit tube, the additional
fast neutron activations need to be determined.  The thermal/fast ratio is
used to determine the fast neutron flux from the thermal flux equivalent for
the given rabbit tube.  The resulting fast flux is (thermal flux)/(thermal/fast ratio).
This value is unitless.  Use a value of 0 for beamline experiments.
</div>

<div id=help_time_on class="help">
<h3>Time on beam</h3>
<p>
Time on the beam is the length of the exposure at the given flux.  Activation
will be accumulated over time.  Time defaults to hours, but can be set to
hours, minutes, seconds, days, weeks or years by adding h, m, s, d, w, or y
to the value respectively.
</p>
</div>

<div id=help_time_off class="help">
<h3>Time off beam</h3>
<p>
The sample begins to decay immediately, even while it is being activated.
We compute the activation level when the sample is removed from the beam,
and at 1 hour, 1 day and 15 days post activation.  The time off beam field
allows you to specify an additional time after activation, using the same
syntax as the time on beam field.
</p>
</div>

<div id=help_wavelength class="help">
<h3>Source neutrons</h3>
<p>
The energy of the source neutrons will affect the absorption cross section
and hence the penetration depth and sample attenuation.  Energy can be
expressed as wavelength in &Aring;, as energy in meV, or as neutron
velocity in m/s.  The underlying calculator does not yet compute proper
cross sections for isotopes with resonances in the thermal neutron range.
</p><p>
For some isotopes there are scattering <a href="resonance.html">resonances</a> in the thermal neutron range.  Check if this is a concern for your material.
</p>
</div>

<div id=help_xray class="help">
<h3>Source X-rays</h3>
<p>
X-ray scattering has similar properties to neutron scattering, and given
the wavelength, is easy to calculate.  Wavelength can be specified in
&Aring;, as energy in keV, or using an element name for the K<sub>&alpha;</sub>
emission line for that element.
</p>
</div>

<!-- end of help -->

    </div>
    <div class="clear" />
    <p>
    Neutron scattering and activation calculations are performed by the <a href="http://www.reflectometry.org/danse/docs/elements">periodictable</a> package.
    </p>

    <div id="results"> </div>

</div> 
<hr>
<div class="footer">
  <div style="float:left;"><p>Inquiries or Comments: Dave Brown (<a href="mailto:david.brown@nist.gov">david.brown@nist.gov</a>)</p></div>
  <div style="float:right;"><p><?php lastmod(); ?></p></div>
</div>

<script type="text/javascript">
//$('input').focusin(function(){ $("#help_"+this.id.slice(3)).show();});
//$('input').focusout(function(){$("#help_"+this.id.slice(3)).hide();});
// Display help on input
ACTIVE_HELP=null;
$('input').focusin(function(){ 
  if (ACTIVE_HELP) ACTIVE_HELP.hide(); 
  ACTIVE_HELP = $("#help_"+this.id.slice(3));
  ACTIVE_HELP.show();
});
</script>
